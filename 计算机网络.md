# 计算机网络

## 1. 基础知识

### 路由器、交换机

交换机是目前局域网内主机通信的解决方案。
它能够进行MAC地址学习，记录在其MAC表中。主机通信时只将消息发送给对应主机。  
在交换机之前的同轴电缆或者集线器等都是广播，然后丢包的形式

路由器用来在不同的网段之间发送消息。首先会发送至网关，网关地址一般在路由器上。然后路由器根据路由表进行通信。
路由表中记录了静态路由（手动配置下一跳）、直连设备（直接连在路由器上的网段）、动态路由（通过路由选择协议自动获取路由信息）


### 静态路由、动态路由

静态路由：
管理员手动添加路由信息，适用于小规模网络
动态路由：
路由器通过路由选择协议（比如 RIP、OSPF）自动获取路由信息，适用于大规模网络。
它的原理是路由器之间根据动态协议适时地交换路由信息


### 局域网、以太网、无线局域网

局域网：
一般是范围在几百米到十几公里内的计算机所构成的计算机网络。
常用于公司、家庭、学校、医院、机关、一幢大楼等
以太网：
以太网是局域网中使用最广泛的网络技术。
使用了 CSMA/CD（载波侦听、多路访问、冲突检测） 的网络可以称为是以太网，它传输的是以太网帧。
制定了一些规范如物理层的连线、接口等等
无线局域网：
无线局域网对比局域网。局域网是使用物理连线将各设备连接起来。而无线局域网则是使用无线通信技术。其他基本类似。


### DNS、CDN、VPN、NAT

DNS：域名系统。它的主要作用就是将域名解析为IP地址。
域名查找大部分工作是根据自己配置的DNS服务器（即本地DNS服务器，这个本地是相对的概念，意为离你最近的DNS服务器）
比如：缓存、从根DNS服务器开始，一级一级查找最终的域名IP，都是通过本地DNS服务器完成
CDN：利用最靠近用户的服务器，最快地将资源传递给用户。
比如很多JS库都是使用了CDN的。当国内用户和国外用户都加载同一个域名的CDN时。实际上提供资源的服务器并不是同一个，CDN运营商再各大城市部署了机房，付费后即可享受其服务。
VPN：在公共网络上建立专用网络，进行加密通讯。
它的原理就是在VPN客户端和VPN服务端之间进行加密通信。用户先安装VPN客户端，使用客户端访问公司内网，先到达公司部署的VPN服务器，服务器解密后再传输给内网地址。
NAT：私网 IP 访问 Internet 需要进行 NAT 转换为公网 IP， 这一步可以由路由器来完成。
它有三种方式：静态转换、动态转换。这两种转换均为一对一。
使用最广泛的是PAT，采用端口多路复用，路由器通过端口号标记不同主机。可实现多个私网IP对一个公网IP


### MAC、IPv4、IPv6、端口

MAC：网卡带有，共6字节，前3字节为OUI（组织唯一标识符），由IEEE分配给产商。后3字节为网络接口标识符，由厂商自行分配。
当 48 位全为 1 时，即 FF-FF-FF-FF-FF-FF，代表广播地址
IPv4：平时称的IP，如果不特殊说明，一般就是指IPv4。
IP由网络标识（网络ID）和主机标识（主机ID）两部分构成。
子网掩码二进制为1的位，即代表网络ID位数。更加科学的方式是：子网掩码 &（按位与） IP 地址。网络ID相同的主机即认为在同一网段。
主机ID为0，代表主机所在网段、主机ID为1，代表广播
A类地址（0开头）：1-126
B类地址（10开头）：128~191.0~255
C类地址（110开头）：192~223.0~255.0~255
D类地址(1110开头)：用于多播（组播）地址。无子网掩码、第一部分224~239
E类地址(1111开头)：保留为今后使用，第 1 部分240~255
IPv6：IPv6采用十六进制表示法，区别于IPv4的十进制表示。共16字节，分8组。如 2001:0db8:86a3:08d3:1319:8a2e:0370:7344
工作在网络层，传输时首部格式相对IPV4简洁。
功能上新增的头部：Flow Label，表示数据包属于哪个流数据。Next Header（8bit）：下一个头部，用于扩展头部。
端口：可认为是计算机与外界通讯交流的出口。不同的协议有不同的默认端口。比如熟知的HTTP（80）、HTTPS（443）、FTP（21）、SMTP服务（53） - 用于发送协议
发现只有应用层协议有默认端口
当客户端发送数据给服务端时，默认也是会有一个随机端口的。传输层不存储URL（比如TCP，不同URL通过TCP先后发送给服务器时，数据可能是混在一起传输的），是根据客户端的随机端口映射对应的请求的。



### 子网划分、子网掩码

## 2. 参考模型

### 7层（OSI）

### 4层（TCP/IP）

### 5层

- 应用层、报文
- 传输层、段
- 网络层、包
- 数据链路层、帧
- 物理层、比特流

## 5. 其他协议

### ARP、RARP、DHCP、ICMP

### FTP、WebSocket

### 流媒体协议

### 及时通讯协议

- XMPP
- MQTT

### 邮件协议

- IMAP
- SMTP
- POP3

## 4. 实战工具

### xshell、wireshark

### Telnet、tcpdump

### Cisco Packet Tracer

### sucket 爬虫

## 3. 主要协议

### UDP

### TCP

- 报文格式
- 连接管理

	- 三次握手
	- 四次挥手

- 可靠传输
- 流量控制
- 拥塞控制

### HTTP

- 代理
- 缓存
- 报文格式
- 头信息
- 其他

	- Web Service
	- SOAP
	- RESful

### HTTPS

- 对称加密
- 非对称加密
- 摘要算法
- 数字证书
- SSL、TLS

*XMind - Trial Version*